{% load static %}

<!DOCTYPE html>
<html lang="fr">
    <head>
        {% load pwa %}
        {% progressive_web_app_meta %}
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="{% static 'css/qstockapp/reset.css' %}">
        <link rel="stylesheet" href="{% static 'css/qstockapp/base.css' %}">
        <script src="{% static 'js/qstockapp/theme.js' %}" defer></script>
        <script src="{% static 'js/qstockapp/loader.js' %}" defer></script>
        <script src="{% static 'js/quickstockapp/current_tab.js' %}" defer></script>
        {% block head %}
        <title>{% if company_name %} {{ company_name }} {% else %} QuickStock {% endif %}</title>
        {% endblock %}
        <style>
            body {
                padding: 0;
                margin: 0;
            }
            li {
                list-style: none;
            }
            
            h1 {
                font-size: 25px;
            }
            .menu ul {

                padding: 0;
            }
            {% block extra_styles %}
            {% endblock %}
        </style>
    </head>
    <body>
        <div class="theme_color" style="display: none;">{{ current_store.accent_color_code }}</div>
        <div class="loader"></div>
        <main>
            <div class="sidebar">
                <div class="app_name">
                    {% if app_settings.company_logo %}
                    <img src="{{ app_settings.company_logo.url }}" alt="Logo" height="40">
                    {% endif %}
                    <h1>
                        {% if app_settings.company_name %} {{ app_settings.company_name }} {% else %} QuickStock {% endif %}</h1>
                </div>
                <div class="sidebar-content">
                    <input type="hidden" id="current_tab" value="{{ current_tab }}">
                    <div class="menu">
                        <ul>
                            <li>
                                <a href="{% url 'home' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M11.4 3.59998V8.39998H3.60001V7.19998C3.60001 6.2452 3.97929 5.32952 4.65442 4.65439C5.32955 3.97926 6.24523 3.59998 7.20001 3.59998H11.4ZM12.6 3.59998V14.4H20.4V7.19998C20.4 6.2452 20.0207 5.32952 19.3456 4.65439C18.6705 3.97926 17.7548 3.59998 16.8 3.59998H12.6ZM20.4 15.6H12.6V20.4H16.8C17.7548 20.4 18.6705 20.0207 19.3456 19.3456C20.0207 18.6704 20.4 17.7548 20.4 16.8V15.6ZM11.4 20.4V9.59998H3.60001V16.8C3.60001 17.7548 3.97929 18.6704 4.65442 19.3456C5.32955 20.0207 6.24523 20.4 7.20001 20.4H11.4Z" fill="black"/>
                                    </svg>
                                    Tableau de bord
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'products:product_list' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M13.8535 3.14648C13.9472 3.24024 13.9999 3.3674 13.9999 3.49998C13.9999 3.63256 13.9472 3.75972 13.8535 3.85348L12.707 4.99998L13.8535 6.14648C13.9446 6.24078 13.995 6.36708 13.9938 6.49818C13.9927 6.62928 13.9401 6.75468 13.8474 6.84739C13.7547 6.94009 13.6293 6.99268 13.4982 6.99382C13.3671 6.99496 13.2408 6.94456 13.1465 6.85348L12 5.70698L10.8535 6.85348C10.807 6.8999 10.7519 6.93672 10.6912 6.96183C10.6305 6.98694 10.5655 6.99985 10.4998 6.99983C10.4341 6.99981 10.3691 6.98685 10.3085 6.96169C10.2478 6.93654 10.1927 6.89968 10.1462 6.85323C10.0998 6.80677 10.063 6.75163 10.0379 6.69095C10.0128 6.63026 9.99988 6.56523 9.9999 6.49955C9.99992 6.43388 10.0129 6.36885 10.038 6.30819C10.0632 6.24752 10.1 6.1924 10.1465 6.14598L11.293 4.99998L10.1465 3.85348C10.1001 3.80702 10.0633 3.75188 10.0381 3.6912C10.013 3.63051 10.0001 3.56548 10.0001 3.4998C10.0002 3.43413 10.0131 3.3691 10.0383 3.30844C10.0634 3.24777 10.1003 3.19265 10.1468 3.14623C10.1932 3.09981 10.2483 3.06299 10.309 3.03788C10.3697 3.01277 10.4348 2.99985 10.5004 2.99988C10.5661 2.9999 10.6311 3.01286 10.6918 3.03801C10.7525 3.06317 10.8076 3.10002 10.854 3.14648L12 4.29298L13.1465 3.14648C13.2403 3.05274 13.3674 3.00009 13.5 3.00009C13.6326 3.00009 13.7597 3.05274 13.8535 3.14648ZM9.599 16.364C9.93377 16.4755 10.2944 16.4833 10.6337 16.3862C10.9729 16.2891 11.2749 16.0917 11.5 15.82V21.0115L5.5 18.75V14.998L9.599 16.364Z" fill="black"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 18.75L12.5 21.0115V15.82C12.7251 16.0917 13.0271 16.2891 13.3663 16.3862C13.7056 16.4833 14.0662 16.4755 14.401 16.364L18.5 14.998V18.75ZM16.658 17.7245C16.7838 17.6826 16.8879 17.5924 16.9472 17.4738C17.0066 17.3552 17.0164 17.2178 16.9745 17.092C16.9326 16.9661 16.8424 16.8621 16.7238 16.8027C16.6052 16.7434 16.4678 16.7336 16.342 16.7755L14.092 17.5255C13.9662 17.5674 13.8621 17.6576 13.8028 17.7762C13.7434 17.8948 13.7336 18.0321 13.7755 18.158C13.8174 18.2838 13.9076 18.3879 14.0262 18.4472C14.1448 18.5066 14.2822 18.5164 14.408 18.4745L16.658 17.7245ZM12.1635 7.52749C12.0576 7.49084 11.9424 7.49084 11.8365 7.52749L5.3375 9.77749L5.326 9.78099C5.23862 9.81349 5.16207 9.86978 5.105 9.94349L3.11 12.4375C3.05961 12.5004 3.02516 12.5745 3.00959 12.6535C2.99402 12.7326 2.99779 12.8143 3.02057 12.8915C3.04336 12.9688 3.08448 13.0395 3.14045 13.0974C3.19641 13.1554 3.26556 13.199 3.342 13.2245L10.092 15.4745C10.1942 15.5085 10.3047 15.5085 10.4069 15.4746C10.5092 15.4408 10.5978 15.3748 10.6595 15.2865L12 13.3715L13.34 15.2865C13.4017 15.3749 13.4904 15.4409 13.5928 15.4748C13.6951 15.5087 13.8057 15.5086 13.908 15.4745L20.658 13.2245C20.7345 13.1991 20.8037 13.1555 20.8597 13.0976C20.9157 13.0396 20.9569 12.969 20.9797 12.8917C21.0026 12.8144 21.0064 12.7327 20.9908 12.6536C20.9753 12.5746 20.9409 12.5004 20.8905 12.4375L18.8955 9.94349C18.8357 9.86646 18.7547 9.80858 18.6625 9.77699L12.1635 7.52749ZM12 11.971L16.9715 10.25L12 8.52899L7.0285 10.25L12 11.971Z" fill="black"/>
                                    </svg>
                                    Produits & Stock</a></li>
                            <li>
                                
                                <a href="{% url 'orders:order_list' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M22 13.126C20.8858 12.3251 19.5306 11.9303 18.1606 12.0074C16.7905 12.0846 15.4883 12.6291 14.471 13.5501C13.4537 14.4711 12.7829 15.7129 12.5704 17.0686C12.3578 18.4243 12.6164 19.8119 13.303 21H3C2.73478 21 2.48043 20.8946 2.29289 20.7071C2.10536 20.5196 2 20.2652 2 20V4C2 3.73478 2.10536 3.48043 2.29289 3.29289C2.48043 3.10536 2.73478 3 3 3H10.414L12.414 5H21C21.2652 5 21.5196 5.10536 21.7071 5.29289C21.8946 5.48043 22 5.73478 22 6V13.126ZM20 17H23V19H20V22.5L15 18L20 13.5V17Z" fill="black"/>
                                    </svg>
                                    Commandes</a></li>
                            <li>
                                
                                <a href="{% url 'sales:sale_list' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_147_21" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="0" width="20" height="24">
                                        <path d="M20.5 7L12 2L3.5 7V17L12 22L20.5 17V7Z" fill="white" stroke="white" stroke-width="3" stroke-linejoin="round"/>
                                        <path d="M12 11V15M16 9V15M8 13V15" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                        </mask>
                                        <g mask="url(#mask0_147_21)">
                                        <path d="M0 0H24V24H0V0Z" fill="black"/>
                                        </g>
                                    </svg>
                                    Ventes</a></li> 
                            <!-- <li><a href="{% url 'pin_test_view' %}">Test pin code</a></li>  -->
                        </ul>
                    </div>
                    <div class="bottom">
                        <ul>
                            <li>
                                <a href="{% url 'accounts:user_list' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 14V22H4C4 19.8783 4.84285 17.8434 6.34315 16.3431C7.84344 14.8429 9.87827 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM21 17H22V22H14V17H15V16C15 15.2044 15.3161 14.4413 15.8787 13.8787C16.4413 13.3161 17.2044 13 18 13C18.7956 13 19.5587 13.3161 20.1213 13.8787C20.6839 14.4413 21 15.2044 21 16V17ZM19 17V16C19 15.7348 18.8946 15.4804 18.7071 15.2929C18.5196 15.1054 18.2652 15 18 15C17.7348 15 17.4804 15.1054 17.2929 15.2929C17.1054 15.4804 17 15.7348 17 16V17H19Z" fill="black"/>
                                    </svg>
                                    Administration                                    
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'debts:debt_list' %}" class="debt-link">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M2 7H20M16 2L21 7L16 12M22 17H4M8 12L3 17L8 22" stroke="black" stroke-width="2"/>
                                    </svg>
                                    Gérer les impayés
                                </a>
                            </li> 
                            <li>
                                <a href="{% url 'settings:setting_update' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 8.75C11.138 8.75 10.3114 9.09241 9.7019 9.7019C9.09241 10.3114 8.75 11.138 8.75 12C8.75 12.862 9.09241 13.6886 9.7019 14.2981C10.3114 14.9076 11.138 15.25 12 15.25C12.862 15.25 13.6886 14.9076 14.2981 14.2981C14.9076 13.6886 15.25 12.862 15.25 12C15.25 11.138 14.9076 10.3114 14.2981 9.7019C13.6886 9.09241 12.862 8.75 12 8.75Z" fill="black"/>
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.68 2.806C12.472 2.69042 12.238 2.62976 12 2.62976C11.762 2.62976 11.528 2.69042 11.32 2.806L4.11999 6.806C3.90174 6.92727 3.71988 7.10472 3.59329 7.31993C3.46669 7.53515 3.39995 7.78031 3.39999 8.03V15.97C3.39999 16.479 3.67599 16.947 4.11999 17.194L11.32 21.194C11.528 21.3096 11.762 21.3702 12 21.3702C12.238 21.3702 12.472 21.3096 12.68 21.194L19.88 17.194C20.0981 17.0728 20.2799 16.8955 20.4064 16.6805C20.533 16.4655 20.5999 16.2205 20.6 15.971V8.03C20.6 7.78031 20.5333 7.53515 20.4067 7.31993C20.2801 7.10472 20.0983 6.92727 19.88 6.806L12.68 2.806ZM7.24999 12C7.24999 10.7402 7.75044 9.53204 8.64124 8.64124C9.53203 7.75044 10.7402 7.25 12 7.25C13.2598 7.25 14.468 7.75044 15.3588 8.64124C16.2495 9.53204 16.75 10.7402 16.75 12C16.75 13.2598 16.2495 14.468 15.3588 15.3588C14.468 16.2496 13.2598 16.75 12 16.75C10.7402 16.75 9.53203 16.2496 8.64124 15.3588C7.75044 14.468 7.24999 13.2598 7.24999 12Z" fill="black"/>
                                    </svg>
                                    Paramètres
                                </a>
                            </li> 
                            <li>
                                <a href="{% url 'accounts:logout' %}">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M16.125 12C16.125 11.8011 16.046 11.6103 15.9053 11.4697C15.7647 11.329 15.5739 11.25 15.375 11.25H4.40199L6.36299 9.57C6.43785 9.50591 6.49934 9.42771 6.54398 9.33986C6.58861 9.25201 6.6155 9.15622 6.62311 9.05798C6.63073 8.95973 6.61892 8.86095 6.58835 8.76727C6.55779 8.67359 6.50908 8.58685 6.44499 8.512C6.38091 8.43714 6.30271 8.37565 6.21486 8.33101C6.127 8.28638 6.03122 8.25949 5.93298 8.25188C5.83473 8.24426 5.73595 8.25607 5.64227 8.28664C5.54859 8.3172 5.46185 8.36591 5.38699 8.43L1.88699 11.43C1.80466 11.5004 1.73855 11.5878 1.69323 11.6862C1.64791 11.7846 1.62444 11.8917 1.62444 12C1.62444 12.1083 1.64791 12.2154 1.69323 12.3138C1.73855 12.4122 1.80466 12.4996 1.88699 12.57L5.38699 15.57C5.53817 15.6994 5.73456 15.7635 5.93298 15.7481C6.13139 15.7327 6.31557 15.6392 6.44499 15.488C6.57442 15.3368 6.63849 15.1404 6.62311 14.942C6.60773 14.7436 6.51417 14.5594 6.36299 14.43L4.40299 12.75H15.375C15.5739 12.75 15.7647 12.671 15.9053 12.5303C16.046 12.3897 16.125 12.1989 16.125 12Z" fill="black"/>
                                        <path d="M9.375 8C9.375 8.702 9.375 9.053 9.544 9.306C9.61679 9.41478 9.71022 9.50821 9.819 9.581C10.072 9.75 10.423 9.75 11.125 9.75H15.375C15.9717 9.75 16.544 9.98705 16.966 10.409C17.3879 10.831 17.625 11.4033 17.625 12C17.625 12.5967 17.3879 13.169 16.966 13.591C16.544 14.0129 15.9717 14.25 15.375 14.25H11.125C10.423 14.25 10.072 14.25 9.819 14.418C9.71012 14.4911 9.61668 14.5849 9.544 14.694C9.375 14.947 9.375 15.298 9.375 16C9.375 18.828 9.375 20.243 10.254 21.121C11.132 22 12.546 22 15.374 22H16.374C19.204 22 20.617 22 21.496 21.121C22.375 20.243 22.375 18.828 22.375 16V8C22.375 5.172 22.375 3.757 21.496 2.879C20.617 2 19.203 2 16.375 2H15.375C12.546 2 11.132 2 10.254 2.879C9.375 3.757 9.375 5.172 9.375 8Z" fill="black"/>
                                    </svg>
                                    Déconnexion
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="container">
                <header>
                    <div class="title">
                        <h2>
                            {{ page_title }}
                        </h2>
                    </div>
                    <div>
                        {% if not current_store %}
                        <span>Selectionnez un magasin 👉</span>
                        {% endif %}
                        <div class="current-store">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clip-path="url(#clip0_98_2)">
                                <path d="M23.595 9.89911L12.7922 0.2985C12.5732 0.106105 12.2916 0 12 0C11.7084 0 11.4268 0.106105 11.2078 0.2985L0.405024 9.89911C0.22142 10.0615 0.0919451 10.2762 0.0340079 10.5143C-0.0239292 10.7525 -0.00755099 11.0026 0.0809408 11.2312C0.167985 11.4567 0.321128 11.6507 0.520313 11.7878C0.719497 11.9248 0.955436 11.9985 1.19723 11.9992H2.39754V22.7999C2.39754 23.1182 2.524 23.4234 2.7491 23.6485C2.9742 23.8736 3.2795 24 3.59784 24H20.4022C20.7205 24 21.0258 23.8736 21.2509 23.6485C21.476 23.4234 21.6025 23.1182 21.6025 22.7999V11.9992H22.8028C23.0446 11.9985 23.2805 11.9248 23.4797 11.7878C23.6789 11.6507 23.832 11.4567 23.9191 11.2312C24.0076 11.0026 24.0239 10.7525 23.966 10.5143C23.9081 10.2762 23.7786 10.0615 23.595 9.89911ZM13.2003 21.5998H10.7997V17.9996C10.7997 17.6813 10.9262 17.3761 11.1513 17.151C11.3764 16.926 11.6817 16.7995 12 16.7995C12.3183 16.7995 12.6236 16.926 12.8487 17.151C13.0738 17.3761 13.2003 17.6813 13.2003 17.9996V21.5998ZM19.2018 21.5998H15.6009V17.9996C15.6009 17.0448 15.2215 16.129 14.5462 15.4539C13.8709 14.7787 12.955 14.3994 12 14.3994C11.045 14.3994 10.1291 14.7787 9.45376 15.4539C8.77846 16.129 8.39908 17.0448 8.39908 17.9996V21.5998H4.79815V11.9992H19.2018V21.5998ZM4.35404 9.59909L12 2.80666L19.646 9.59909H4.35404Z" fill="black"/>
                                </g>
                                <defs>
                                <clipPath id="clip0_98_2">
                                <rect width="24" height="24" fill="white"/>
                                </clipPath>
                                </defs>
                            </svg>
                            <span class="current">
                                {% if current_store %}
                                {{ current_store }}
                                {% else %}
                                _______________
                                {% endif %}
                            </span>
                            <a href="{% url 'stores:store_list' %}" title="Changer de magazin"></a>
                        </div>
                        <span title="Profile utilisateur">
                            <a class="user" href="{% url 'accounts:details' %}">
                                <span>
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8 7C8 5.93913 8.42143 4.92172 9.17157 4.17157C9.92172 3.42143 10.9391 3 12 3C13.0609 3 14.0783 3.42143 14.8284 4.17157C15.5786 4.92172 16 5.93913 16 7C16 8.06087 15.5786 9.07828 14.8284 9.82843C14.0783 10.5786 13.0609 11 12 11C10.9391 11 9.92172 10.5786 9.17157 9.82843C8.42143 9.07828 8 8.06087 8 7ZM8 13C6.67392 13 5.40215 13.5268 4.46447 14.4645C3.52678 15.4021 3 16.6739 3 18C3 18.7956 3.31607 19.5587 3.87868 20.1213C4.44129 20.6839 5.20435 21 6 21H18C18.7956 21 19.5587 20.6839 20.1213 20.1213C20.6839 19.5587 21 18.7956 21 18C21 16.6739 20.4732 15.4021 19.5355 14.4645C18.5979 13.5268 17.3261 13 16 13H8Z" fill="white"/>
                                    </svg>
                                </span>
                                {% if user.fullname != None %}
                                    {{ user.fullname|title }}
                                {% else %}
                                    {{ user.username }}
                                {% endif %}
                            </a>
                        </span>
                    </div>
                </header>
                <div class="body_content">
                    
                    {% block body %} {% endblock %}
                </div>
            </div>
        </main>
        <div class="messages">
            {% for message in messages %}
                <p {% if message.tags %} class="{{ message.tags }}"{% endif %} > {{ message }}</p>
            {% endfor %}
            {% block extra_messages %}
            {% endblock %}
        </div>
    </body>
</html>
